<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jie Wu's Portfolio</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poiret+One&family=Roboto&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
      integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
      crossorigin="anonymous"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./img/favicon.ico" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav id="nav">
      <div class="container">
        <a href="https://fairjay8788.github.io/">
          <img src="./img/logo1.png" id="logo" />
        </a>
        <div id="menu-wrap">
          <ul id="nav-menu">
            <li><a href="#showcase">Top</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#work">Work</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
          <div id="nav-slider"></div>
        </div>
        <div id="mode-switch">
          <p id="mode-text">Go To Dark</p>
          <img src="./img/rightarrow.gif" />
          <div id="switch-wrap">
            <div class="wrapper">
              <div class="darkOff"></div>
              <div id="switch-flicker"></div>
              <div class="darkOn"></div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <header id="showcase" class="lt-showcase-bg lt-primary-color">
      <div class="container">
        <div id="showcase-intro">
          <h1 class="primary-title luminousText">Hi, I'm Jie Wu</h1>
          <h2 class="secondary-title luminousText">Welcome to my portfolio</h2>
        </div>
      </div>
      <div id="showcase-slide">
        <div id="slides-wrap">
          <!-- duplicate images at last to make sure infinite animation is smooth -->
          <img src="./img/sschinesefood.jpg" />
          <img src="./img/ssnumbergame.jpg" />
          <img src="./img/ssportfolioMU1.jpg" />
          <img src="./img/sssitev1.jpg" />
          <img src="./img/sschinesefood.jpg" />
          <img src="./img/ssnumbergame.jpg" />
        </div>
      </div>
    </header>
    <section id="about" class="lt-primary-bg lt-primary-color py-3">
      <div class="container">
        <h2 class="section-title primary-title luminousText">About Me</h2>
        <h3 class="section-lead secondary-title">
          Husband, Father To Be, Son, Dog Owner and Web Developer
        </h3>
        <div id="about-details">
          <img src="./img/aboutme.jpg" />
          <p class="lt-secondary-bg">
            Hi there! I'm Jie Wu, a self-taught web developer. I like coding,
            music, video games and everything I do together with my family. I'm
            constantly learning and updating my portfolio. Hopefully this will
            become something I'm proud of. Don't forget to come back and check
            out more impressive works!
            <br />
            <br />
            Feel free to reach me out for anything: jobs, questions, suggestions
            or even just to say Hi. I will get back to you ^_^
            <br />
            <br />
            Never stop coding. Never stop learning. &#128071;&#128071;&#128071;
          </p>
        </div>
        <div id="about-skills">
          <img src="./img/htmllogo.png" />
          <img src="./img/csslogo.png" />
          <img src="./img/sasslogo.png" />
          <img src="./img/jslogo.png" />
          <img src="./img/gitlogo.png" />
          <img
            src="./img/reactlogo.png"
            title="in progress"
            class="learning-skills"
          />
          <img
            src="./img/nodelogo.png"
            title="in progress"
            class="learning-skills"
          />
        </div>
      </div>
    </section>
    <section id="work" class="lt-secondary-bg lt-primary-color py-3">
      <div class="container">
        <h2 class="section-title primary-title luminousText">My Work</h2>
        <h3 class="section-lead secondary-title">More are coming ...</h3>
        <div id="major-projects">
          <div class="project-wrap lt-primary-bg lt-primary-color">
            <div class="project-img">
              <a href="./guessnumber/" target="_blank">
                <img src="./img/ssnumbergame.jpg" />
                <div class="project-overlay">
                  <p>Number Guessing Game</p>
                </div>
              </a>
            </div>
            <div class="project-desc">
              First vanilla javascript game.
              <br />
              <br />
              This project is inspired by a little game I played as a kid. It's
              not as easy as you might think after reading the rules. It
              requires not only logical thinking, but also a bit of luck. Give
              it a try and challenge yourself.
            </div>
            <div class="project-tags">
              <div class="tag-js">Pure Javascript</div>
            </div>
            <div class="project-source">
              <a
                href="https://github.com/fairjay8788/fairjay8788.github.io/tree/master/guessnumber"
                target="_blank"
                ><i class="fab fa-github fa-2x lt-primary-color"></i
              ></a>
            </div>
          </div>
          <div class="project-wrap lt-primary-bg lt-primary-color">
            <div class="project-img">
              <a href="./portfolioMU1/" target="_blank">
                <img src="./img/ssportfolioMU1.jpg" />
                <div class="project-overlay">
                  <p>Portfolio Mockup I</p>
                </div>
              </a>
            </div>
            <div class="project-desc">
              Mockup of a simple portfolio website.
              <br />
              <br />
              I found this portfolio site clean and pretty. Actually this is
              where I got the idea of giving my own portfolio site a light/dark
              switching appearance. It's also fully responsive.
            </div>
            <div class="project-tags">
              <div class="tag-responsive">Responsive</div>
            </div>
            <div class="project-source">
              <a
                href="https://github.com/fairjay8788/fairjay8788.github.io/tree/master/portfolioMU1"
                target="_blank"
                ><i class="fab fa-github fa-2x lt-primary-color"></i
              ></a>
            </div>
          </div>
          <div class="project-wrap lt-primary-bg lt-primary-color">
            <div class="project-img">
              <a href="./restaurant/" target="_blank">
                <img src="./img/sschinesefood.jpg" />
                <div class="project-overlay">
                  <p>Panda Buffet</p>
                </div>
              </a>
            </div>
            <div class="project-desc">
              Website for local restaurant.
              <br />
              <br />
              When I first saw the background image of the landing page, I felt
              so hungry. Yes, that's almost the entire reason why I built this.
              If I see a real website like this for a real restaurant, I will go
              grab a bite.
            </div>
            <div class="project-tags">
              <div class="tag-responsive">Responsive</div>
              <div class="tag-sass">Sass</div>
            </div>
            <div class="project-source">
              <a
                href="https://github.com/fairjay8788/fairjay8788.github.io/tree/master/restaurant"
                target="_blank"
                ><i class="fab fa-github fa-2x lt-primary-color"></i
              ></a>
            </div>
          </div>
        </div>
        <div id="minor-projects">
          <div class="minor-projects-header lt-primary-bg lt-primary-color">
            <p>More</p>
            <i class="fas fa-chevron-up"></i>
          </div>
          <div class="minor-projects-main">
            <div class="minor-projects-container">
              <div class="minor-project-wrap">
                <div class="minor-project-img">
                  <a href="./portfolioV1/" target="_blank">
                    <img src="./img/sssitev1.jpg" />
                    <div class="minor-project-overlay">
                      <p>Portfolio Version I</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="contact" class="lt-primary-bg lt-primary-color py-3">
      <div class="container">
        <h2 class="section-title primary-title luminousText">Contact Me</h2>
        <h3 class="section-lead secondary-title">
          What do you think? Let's talk.
        </h3>
        <form id="contact-form">
          <div class="input-group">
            <input type="text" name="name" placeholder="Name" id="name-field" />
            <p class="input-error-msg" id="name-error-msg">
              What should I call you?
            </p>
          </div>
          <div class="input-group">
            <input
              type="email"
              name="email"
              placeholder="Email"
              id="email-field"
            />
            <p class="input-error-msg" id="email-error-msg">
              Come on, I won't spam you.
            </p>
          </div>
          <div class="input-group">
            <textarea
              name="message"
              placeholder="Message"
              id="message-field"
            ></textarea>
            <p class="input-error-msg" id="message-error-msg">
              What can I do for you?
            </p>
          </div>
          <input type="submit" value="Send" id="btn-form-submit" />
        </form>
      </div>
    </section>
    <footer>
      <p>Code and Design by Jie Wu</p>
    </footer>
    <!-- <script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script> -->

    <script defer>
      console.log("before everything");
      // UI
      const UINavMenu = document.getElementById("nav-menu");
      const UIModeSwitch = document.getElementById("switch-flicker");
      const UIMinorProjectsHeader = document.querySelector(
        ".minor-projects-header"
      );
      const UIContactForm = document.getElementById("contact-form");

      console.log("before smooth scroll");
      // Smooth Scroll
      // const scroll = new SmoothScroll('a[href*="#"]', { speed: 800 });
      console.log("after smooth scroll");

      // NavMenu Module

      const navMenu = (function () {
        const slider = document.getElementById("nav-slider");
        // UI section variables
        // const showcaseSec = document.getElementById("showcase");
        const aboutSec = document.getElementById("about");
        const workSec = document.getElementById("work");
        const contactSec = document.getElementById("contact");
        // Current position of slider
        let currentLiIndex = 0;
        // Current section in viewport
        let currentSectionIndex = 0;
        let scrollTimer;
        return {
          getCurrentSection: function () {
            // check which section is taking up most of viewport
            if (
              contactSec.getBoundingClientRect().top <
              window.innerHeight / 2
            ) {
              return (currentSectionIndex = 3);
            } else if (
              workSec.getBoundingClientRect().top <
              window.innerHeight / 2
            ) {
              return (currentSectionIndex = 2);
            } else if (
              aboutSec.getBoundingClientRect().top <
              window.innerHeight / 2
            ) {
              return (currentSectionIndex = 1);
            } else {
              return (currentSectionIndex = 0);
            }
          },
          moveSlider: function () {
            if (scrollTimer !== undefined) {
              // If scrollTimer is not undefined, it means the callback function in setTimeOut is waiting to be executed. While waiting, scroll event fired again, so page is not done scrolling, clear current timer and start a new timer. Callback will eventually fire after scroll event stops.
              clearTimeout(scrollTimer);
            }
            scrollTimer = setTimeout(() => {
              // update the currentSectionIndex
              navMenu.getCurrentSection();
              // move slider
              if (currentSectionIndex > currentLiIndex) {
                // Scrolled to a lower section
                slider.style.setProperty(
                  "right",
                  `${320 - (currentSectionIndex + 1) * 80}px`
                );
                setTimeout(() => {
                  slider.style.setProperty(
                    "left",
                    `${currentSectionIndex * 80}px`
                  );
                }, 500);
                // update current index
                currentLiIndex = currentSectionIndex;
              } else if (currentSectionIndex < currentLiIndex) {
                // Scrolled to a upper section
                slider.style.setProperty(
                  "left",
                  `${currentSectionIndex * 80}px`
                );
                setTimeout(() => {
                  slider.style.setProperty(
                    "right",
                    `${320 - (currentSectionIndex + 1) * 80}px`
                  );
                }, 500);
                // update current index
                currentLiIndex = currentSectionIndex;
              }
            }, 150);
          },
        };
      })();

      console.log("after nav module");

      // // Minor Projects Expand Module

      const minorProjects = (function () {
        let isExpanded = false;
        const minorProjectsContainer = document.querySelector(
          ".minor-projects-container"
        );
        const minorProjectsMain = document.querySelector(
          ".minor-projects-main"
        );
        const chevronUp = document.querySelector(
          ".minor-projects-header .fa-chevron-up"
        );
        return {
          expand: function () {
            // Get the most updated height everytime header is clicked
            const targetHeight = minorProjectsContainer.getBoundingClientRect()
              .height;
            if (!isExpanded) {
              // Expand to target height
              minorProjectsMain.style.setProperty(
                "height",
                `${targetHeight}px`
              );
              minorProjectsContainer.style.setProperty("opacity", "1");
              chevronUp.style.setProperty("transform", "rotate(180deg)");
              isExpanded = true;
            } else {
              minorProjectsMain.style.setProperty("height", "0");
              minorProjectsContainer.style.setProperty("opacity", "0");
              chevronUp.style.setProperty("transform", "rotate(0)");
              isExpanded = false;
            }
          },
        };
      })();

      console.log("after expand module");

      // // Contact Form Submission Module

      const form = (function () {
        // Google Apps Script that writes form data into my spreadsheet
        const scriptURL =
          "https://script.google.com/macros/s/AKfycbzy8eHjvQl8L09r-D7jXnoSrITOQeJ50c1u0UBbeOocVPK4LLU/exec";
        const inputName = document.getElementById("name-field");
        const inputEmail = document.getElementById("email-field");
        const inputMsg = document.getElementById("message-field");
        const nameErrMsg = document.getElementById("name-error-msg");
        const emailErrMsg = document.getElementById("email-error-msg");
        const messageErrMsg = document.getElementById("message-error-msg");
        const submitBtn = document.getElementById("btn-form-submit");
        return {
          validation: function (e) {
            e.preventDefault();
            nameErrMsg.style.opacity = "0";
            emailErrMsg.style.opacity = "0";
            messageErrMsg.style.opacity = "0";
            if (inputName.value.trim() === "") {
              nameErrMsg.style.opacity = "1";
            } else if (inputEmail.value.trim() === "") {
              emailErrMsg.style.opacity = "1";
            } else if (inputMsg.value.trim() === "") {
              messageErrMsg.style.opacity = "1";
            } else {
              form.send();
            }
          },
          clearForm: function () {
            inputName.value = "";
            inputEmail.value = "";
            inputMsg.value = "";
          },
          send: function () {
            const data = new FormData(UIContactForm);
            fetch(scriptURL, {
              method: "POST",
              body: data,
            })
              .then((res) => res.json())
              .then((res) =>
                console.log(`Success! Form data written into row ${res.row}.`)
              )
              .catch(console.log);
            form.clearForm();
            submitBtn.value = "Thanks! I will get back to you.";
            setTimeout(() => {
              submitBtn.value = "Send";
            }, 3000);
          },
        };
      })();

      console.log("after form module");

      // Mode State (implement state pattern / not best pattern in this case, just practice)

      class lightMode {
        constructor(controller) {
          this.ctrl = controller;
        }
        paintMode() {
          this.ctrl.prBgChangeNodeList.forEach((ele) => {
            ele.classList.remove("dk-primary-bg");
            ele.classList.add("lt-primary-bg");
          });
          this.ctrl.seBgChangeNodeList.forEach((ele) => {
            ele.classList.remove("dk-secondary-bg");
            ele.classList.add("lt-secondary-bg");
          });
          this.ctrl.prColorChangeNodeList.forEach((ele) => {
            ele.classList.remove("dk-primary-color");
            ele.classList.add("lt-primary-color");
          });
          // Take care of special styles
          // Showcase Background
          document
            .getElementById("showcase")
            .classList.remove("dk-showcase-bg");
          document.getElementById("showcase").classList.add("lt-showcase-bg");
          // Luminous Text
          this.ctrl.glowTextNodeList.forEach((ele) => {
            ele.classList.remove("glowing");
          });
          //  About Me Img
          document.querySelector("#about-details img").src =
            "./img/aboutme.jpg";
          // Flicker
          this.ctrl.flicker.style.setProperty("transform", "translateX(0)");
          document.getElementById("mode-text").textContent = "Go To Dark";
          // Form Submit Button
          document
            .getElementById("btn-form-submit")
            .style.setProperty("background", "black");
          document
            .getElementById("btn-form-submit")
            .style.setProperty("color", "white");
        }
        next() {
          this.ctrl.currentMode = new darkMode(this.ctrl);
          localStorage.setItem("portfolioMode", "dark");
        }
      }

      class darkMode {
        constructor(controller) {
          this.ctrl = controller;
        }
        paintMode() {
          this.ctrl.prBgChangeNodeList.forEach((ele) => {
            ele.classList.remove("lt-primary-bg");
            ele.classList.add("dk-primary-bg");
          });
          this.ctrl.seBgChangeNodeList.forEach((ele) => {
            ele.classList.remove("lt-secondary-bg");
            ele.classList.add("dk-secondary-bg");
          });
          this.ctrl.prColorChangeNodeList.forEach((ele) => {
            ele.classList.remove("lt-primary-color");
            ele.classList.add("dk-primary-color");
          });
          // Take care of special styles
          // Showcase Background
          document
            .getElementById("showcase")
            .classList.remove("lt-showcase-bg");
          document.getElementById("showcase").classList.add("dk-showcase-bg");
          // Luminous Text
          this.ctrl.glowTextNodeList.forEach((ele) => {
            ele.classList.add("glowing");
          });
          // About Me Img
          document.querySelector("#about-details img").src =
            "./img/programmer.jpg";
          // Flicker
          this.ctrl.flicker.style.setProperty("transform", "translateX(25px)");
          document.getElementById("mode-text").textContent = "Go To Light";
          // Form Submit Button
          document
            .getElementById("btn-form-submit")
            .style.setProperty("background", "white");
          document
            .getElementById("btn-form-submit")
            .style.setProperty("color", "black");
        }
        next() {
          this.ctrl.currentMode = new lightMode(this.ctrl);
          localStorage.setItem("portfolioMode", "light");
        }
      }

      class modeCtrl {
        constructor() {
          this.currentMode =
            localStorage.getItem("portfolioMode") === "dark"
              ? new darkMode(this)
              : new lightMode(this);
          // querySelectorAll returns static(not live) NodeList
          this.prBgChangeNodeList = document.querySelectorAll(".lt-primary-bg");
          this.seBgChangeNodeList = document.querySelectorAll(
            ".lt-secondary-bg"
          );
          this.prColorChangeNodeList = document.querySelectorAll(
            ".lt-primary-color"
          );
          this.glowTextNodeList = document.querySelectorAll(".luminousText");
          this.flicker = document.querySelector("#switch-wrap .wrapper");
        }
        initMode = () => {
          this.currentMode.paintMode();
        };
        switchMode = () => {
          console.log("click fired");
          this.currentMode.next();
          this.currentMode.paintMode();
        };
      }

      // Init class
      const mode = new modeCtrl();
      mode.initMode();

      console.log("after mode init");

      // // // Listsener
      // document.addEventListener("scroll", navMenu.moveSlider);
      // UIModeSwitch.addEventListener("click", mode.switchMode);
      // UIMinorProjectsHeader.addEventListener("click", minorProjects.expand);
      // UIContactForm.addEventListener("submit", form.validation);

      console.log("testing switch 1");
      document.getElementById("switch-wrap").addEventListener("click", () => {
        console.log("click in switch wrap");
      });
      document.body.addEventListener("click", () => {
        console.log("click in body");
      });
    </script>
  </body>
</html>
